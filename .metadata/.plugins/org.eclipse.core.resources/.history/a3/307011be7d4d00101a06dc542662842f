/*
 * FND.c
 *
 *  Created on: Jun 20, 2025
 *      Author: kccistc
 */


#include "FND.h"

typedef struct{
	GPIO_TypeDef* GPIO;
	uint32_t pinNum;
} SEG_GPIO_Type;

SEG_GPIO_Type FND_cmm[4] = {
		{GPIOC,8},
		{GPIOC,6},
		{GPIOC,5},
		{GPIOA,12}
};

SEG_GPIO_Type FND_seg[8] = {
		{GPIOA,11},   //A
		{GPIOB,12},   //B
		{GPIOB,2},    //C
		{GPIOB,1},    //D
		{GPIOB,15},   //E
		{GPIOB,14},   //F
		{GPIOB,13},   //G
		{GPIOC,4}     //DP
};

enum {DIGIT1,DIGIT10,DIGIT100,DIGIT1000};

uint16_t fndDisplayNum = 0; // fnd main data(max 9999)

/////public/////
// Write FndData
void FND_WtireData(uint32_t data){
	fndDisplayNum = data;
}


// Read FndData
uint16_t FND_ReadData(){
	return fndDisplayNum;
}

// Display FndData
void FND_DisplayData(){
	static int digitPos = DIGIT1;
	// 인터럽트 발생시 한 자리씩 출력
	digitPos = (digitPos + 1) % 4;
	FND_DisOff();
	switch (digitPos) {
	case DIGIT1:
		FND_DisDigit(digitPos, fndDisplayNum%10);
		break;
	case DIGIT10:
		FND_DisDigit(digitPos, fndDisplayNum/10%10);
		break;
	case DIGIT100:
		FND_DisDigit(digitPos, fndDisplayNum/100%10);
		break;
	case DIGIT1000:
		FND_DisDigit(digitPos, fndDisplayNum/1000%10);
		break;
	default:
		break;
	}
	FND_DisOn();
}

void FND_DisOff(){
	// GPIO_Write(GPIOx,Pin,SET);
	for (i = 0; i < 4; i++) {

	}
}
void FND_DisOn(){
	// GPIO_Write(GPIOx,Pin,RESET);
}
void FND_DisDigit(int digit, int data){

}
